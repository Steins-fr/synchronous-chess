<div class="channel">
    <h3>Webrtc chat</h3>
    <app-room-setup></app-room-setup>

    <ng-container *ngIf="roomService.isActive | async">


        <ng-container>
            <label>Chat - Room ({{ roomService.room.roomName }}) - Pseudo ({{ roomService.room.localPlayer.name }}) - In
                the room:
                <ng-container *ngFor="let participant of roomService.room.players | keyvalue; let isFirst = first;">
                    {{ isFirst ? '' : '-'}} {{ participant.key }}
                </ng-container>
            </label>
            <div id="chat">
                <span *ngFor="let entry of chat">{{ entry }}</span>
            </div>
            <div class="row">
                <input id="send-input" type="text" [(ngModel)]="sendInput" />
                <button id="send" (click)="sendMessage()">Send</button>
            </div>
        </ng-container>
    </ng-container>
</div>
<ng-container *ngIf="roomService.isActive | async">
    <section id="debug" *ngFor="let remotePlayer of roomService.room.players | keyvalue">
        <ng-container *ngIf="remotePlayer.value.type !== 'local'">
            <h4>Debug for connection with {{ remotePlayer.value.name }}</h4>
            <app-debug-webrtc-states [webRTC]="remotePlayer.value.webRTC" [playerName]="remotePlayer.value.name">
            </app-debug-webrtc-states>
            <app-debug-icecandidates [webRTC]="remotePlayer.value.webRTC" [playerName]="remotePlayer.value.name">
            </app-debug-icecandidates>
        </ng-container>
    </section>
</ng-container>